<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0-google-v4) on Fri Apr 06 13:27:35 PDT 2012 -->
<TITLE>
AutoSaver
</TITLE>

<META NAME="date" CONTENT="2012-04-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AutoSaver";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../openblocks/yacodeblocks/AndroidControllerException.html" title="class in openblocks.yacodeblocks"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../openblocks/yacodeblocks/BlockColor.html" title="class in openblocks.yacodeblocks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?openblocks/yacodeblocks/AutoSaver.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AutoSaver.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
openblocks.yacodeblocks</FONT>
<BR>
Class AutoSaver</H2>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>openblocks.yacodeblocks.AutoSaver</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../openblocks/workspace/WorkspaceListener.html" title="interface in openblocks.workspace">WorkspaceListener</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>AutoSaver</B><DT>extends <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../../openblocks/workspace/WorkspaceListener.html" title="interface in openblocks.workspace">WorkspaceListener</A></DL>
</PRE>

<P>
Listens to workspace events to coordinate saving operations.

 An Autosaver will start a java.util TimerTask which will
 attempt to save the blocks workspace every second as long as no workspace
 events have occurred in the last five seconds.

 Autosaver provides a history mechanism that supports undo and redo
 operations on saved state. It keeps a history, which is a list of
 state strings, along with a "currentState" pointer that points to the
 current place in the history (the state from the most recent save or
 restore). A new save operation will save the state immediately after the
 currentState, wiping out any following saved states.
   - checkpoint: If any user-initiated changes have been made since the last
           save or restore, truncate the history list after the currentState,
           append the new state, and advance the currentState pointer to be
           the new saved state.
   - undo: First, do a checkpoint. Then, if there is a state before the
           currentState in the history, back up the currentPointer to the
           previous state and restore the workspace to that state.
   - redo: First, do a checkpoint. Then, if there is a state after the
           currentState in the history, move the currentState pointer forward
           and restores the workspace to that state.

 TODO(sharon): consider compressing the saved history strings to avoid
 consuming too much memory (and possibly allowing a larger number
 of saved states).
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>sharon@google.com (Sharon Perl) - undo/redo</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#SAVE_FAILURE_MESSAGE">SAVE_FAILURE_MESSAGE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#testingMode">testingMode</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#AutoSaver(openblocks.yacodeblocks.WorkspaceController, openblocks.codeblockutil.CSaveButton, openblocks.codeblockutil.CSaveButton, openblocks.codeblockutil.CSaveButton)">AutoSaver</A></B>(<A HREF="../../openblocks/yacodeblocks/WorkspaceController.html" title="class in openblocks.yacodeblocks">WorkspaceController</A>&nbsp;controller,
          <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;saveButton,
          <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;undoButton,
          <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;redoButton)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#checkpoint()">checkpoint</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkpoint: If any changes have been made since the last save or restore,
 truncate the history list after the currentState, append
 a new snapshot, and advance the currentState pointer to be the
 new snapshoted state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#clearHistory()">clearHistory</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clear the undo/redo history and disable the buttons
 Must not hold saverLock on call</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#getWorkspaceChanged()">getWorkspaceChanged</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns whether a workspace event has been listened to since
 the last snapshot occurred or the autosaver was reset.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#onSaveFailed()">onSaveFailed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Should be called when a save attempt fails after a snapshot was taken.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#onSaveSucceeded()">onSaveSucceeded</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Should be called when a save attempt succeeds.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#onSnapshot(java.lang.String)">onSnapshot</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;saveString)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Should be called whenever the workspace is snapshotted (written
 to the server).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#redo()">redo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redo: First, do a checkpoint.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#reset()">reset</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resets the autosaver for a new project.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#saveFormProperties(java.lang.String)">saveFormProperties</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;formProperties)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#saveNow()">saveNow</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#startListening()">startListening</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Causes the autosaver to start acting on workspace events.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#stopListening()">stopListening</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Causes the autosaver to ignore workspace events.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#undo()">undo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undo: First, do a checkpoint.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#workspaceChangedBySystem()">workspaceChangedBySystem</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the workspaceChangedBySystem field to true so that the autosaver will
 recognize that it needs to save the blocks workspace.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openblocks/yacodeblocks/AutoSaver.html#workspaceEventOccurred(openblocks.workspace.WorkspaceEvent)">workspaceEventOccurred</A></B>(<A HREF="../../openblocks/workspace/WorkspaceEvent.html" title="class in openblocks.workspace">WorkspaceEvent</A>&nbsp;event)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invoked whenever any of the enumerated events specified within 
 WorkspaceEvent occur.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="testingMode"><!-- --></A><H3>
testingMode</H3>
<PRE>
public static boolean <B>testingMode</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="SAVE_FAILURE_MESSAGE"><!-- --></A><H3>
SAVE_FAILURE_MESSAGE</H3>
<PRE>
public static final <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>SAVE_FAILURE_MESSAGE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#openblocks.yacodeblocks.AutoSaver.SAVE_FAILURE_MESSAGE">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AutoSaver(openblocks.yacodeblocks.WorkspaceController, openblocks.codeblockutil.CSaveButton, openblocks.codeblockutil.CSaveButton, openblocks.codeblockutil.CSaveButton)"><!-- --></A><H3>
AutoSaver</H3>
<PRE>
public <B>AutoSaver</B>(<A HREF="../../openblocks/yacodeblocks/WorkspaceController.html" title="class in openblocks.yacodeblocks">WorkspaceController</A>&nbsp;controller,
                 <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;saveButton,
                 <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;undoButton,
                 <A HREF="../../openblocks/codeblockutil/CSaveButton.html" title="class in openblocks.codeblockutil">CSaveButton</A>&nbsp;redoButton)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="workspaceEventOccurred(openblocks.workspace.WorkspaceEvent)"><!-- --></A><H3>
workspaceEventOccurred</H3>
<PRE>
public void <B>workspaceEventOccurred</B>(<A HREF="../../openblocks/workspace/WorkspaceEvent.html" title="class in openblocks.workspace">WorkspaceEvent</A>&nbsp;event)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../openblocks/workspace/WorkspaceListener.html#workspaceEventOccurred(openblocks.workspace.WorkspaceEvent)">WorkspaceListener</A></CODE></B></DD>
<DD>Invoked whenever any of the enumerated events specified within 
 WorkspaceEvent occur.  We leave it to the implementor to look 
 at the event type and determine what to do from there.  We chose this 
 design so that listeners need not implement all X methods, where X is the 
 number of workspace events.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../openblocks/workspace/WorkspaceListener.html#workspaceEventOccurred(openblocks.workspace.WorkspaceEvent)">workspaceEventOccurred</A></CODE> in interface <CODE><A HREF="../../openblocks/workspace/WorkspaceListener.html" title="interface in openblocks.workspace">WorkspaceListener</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - WorkspaceEvent object holding information regarding the triggered
 event.</DL>
</DD>
</DL>
<HR>

<A NAME="stopListening()"><!-- --></A><H3>
stopListening</H3>
<PRE>
public void <B>stopListening</B>()</PRE>
<DL>
<DD>Causes the autosaver to ignore workspace events.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="startListening()"><!-- --></A><H3>
startListening</H3>
<PRE>
public void <B>startListening</B>()</PRE>
<DL>
<DD>Causes the autosaver to start acting on workspace events.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getWorkspaceChanged()"><!-- --></A><H3>
getWorkspaceChanged</H3>
<PRE>
public boolean <B>getWorkspaceChanged</B>()</PRE>
<DL>
<DD>Returns whether a workspace event has been listened to since
 the last snapshot occurred or the autosaver was reset.
 Must call without saverLock held
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if workspace has changed</DL>
</DD>
</DL>
<HR>

<A NAME="onSaveFailed()"><!-- --></A><H3>
onSaveFailed</H3>
<PRE>
public void <B>onSaveFailed</B>()</PRE>
<DL>
<DD>Should be called when a save attempt fails after a snapshot was taken.
 Doing so informs the autosaver that it ought to try and save on its
 next opportunity.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="onSaveSucceeded()"><!-- --></A><H3>
onSaveSucceeded</H3>
<PRE>
public void <B>onSaveSucceeded</B>()</PRE>
<DL>
<DD>Should be called when a save attempt succeeds. Informs the autosaver
 that any string of successive save failures has been ended.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="onSnapshot(java.lang.String)"><!-- --></A><H3>
onSnapshot</H3>
<PRE>
public void <B>onSnapshot</B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;saveString)</PRE>
<DL>
<DD>Should be called whenever the workspace is snapshotted (written
 to the server). Adds saveString to the history if anything had changed or
 if this is the initial state to save.
 Also, creates a baseline point from which to determine whether the
 workspace has changed since the last save/restore.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="reset()"><!-- --></A><H3>
reset</H3>
<PRE>
public void <B>reset</B>()</PRE>
<DL>
<DD>Resets the autosaver for a new project.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="saveFormProperties(java.lang.String)"><!-- --></A><H3>
saveFormProperties</H3>
<PRE>
public void <B>saveFormProperties</B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;formProperties)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="saveNow()"><!-- --></A><H3>
saveNow</H3>
<PRE>
public void <B>saveNow</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkpoint()"><!-- --></A><H3>
checkpoint</H3>
<PRE>
public void <B>checkpoint</B>()
                throws <A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></PRE>
<DL>
<DD>checkpoint: If any changes have been made since the last save or restore,
 truncate the history list after the currentState, append
 a new snapshot, and advance the currentState pointer to be the
 new snapshoted state. Sets workspaceChanged to false even though the
 snapshot is not written to the server. This should be fine because
 checkpoint is intended to be used in conjunction with undo and redo,
 which will immediately change the state and note that it needs to
 be written to the server
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="undo()"><!-- --></A><H3>
undo</H3>
<PRE>
public void <B>undo</B>()
          throws <A HREF="../../openblocks/yacodeblocks/UndoRedoException.html" title="class in openblocks.yacodeblocks">UndoRedoException</A>,
                 <A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></PRE>
<DL>
<DD>undo: First, do a checkpoint. Then, if there is a state before the
 currentState in the history, back up the currentPointer to the
 previous state and restore the workspace to that state. Finally, update
 the phone definitions.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../openblocks/yacodeblocks/UndoRedoException.html" title="class in openblocks.yacodeblocks">UndoRedoException</A></CODE> - if there is no previous state
<DD><CODE><A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></CODE> - if checkpointing fails</DL>
</DD>
</DL>
<HR>

<A NAME="redo()"><!-- --></A><H3>
redo</H3>
<PRE>
public void <B>redo</B>()
          throws <A HREF="../../openblocks/yacodeblocks/UndoRedoException.html" title="class in openblocks.yacodeblocks">UndoRedoException</A>,
                 <A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></PRE>
<DL>
<DD>redo: First, do a checkpoint. Then, if there is a state after the
 currentState in the history, move the currentState pointer forward
 and restores the workspace to that state. Finally, update the phone state.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../openblocks/yacodeblocks/UndoRedoException.html" title="class in openblocks.yacodeblocks">UndoRedoException</A></CODE> - if there is no next state
<DD><CODE><A HREF="../../openblocks/yacodeblocks/SaveException.html" title="class in openblocks.yacodeblocks">SaveException</A></CODE> - if checkpointing fails</DL>
</DD>
</DL>
<HR>

<A NAME="workspaceChangedBySystem()"><!-- --></A><H3>
workspaceChangedBySystem</H3>
<PRE>
public void <B>workspaceChangedBySystem</B>()</PRE>
<DL>
<DD>Sets the workspaceChangedBySystem field to true so that the autosaver will
 recognize that it needs to save the blocks workspace.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="clearHistory()"><!-- --></A><H3>
clearHistory</H3>
<PRE>
public void <B>clearHistory</B>()</PRE>
<DL>
<DD>Clear the undo/redo history and disable the buttons
 Must not hold saverLock on call
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../openblocks/yacodeblocks/AndroidControllerException.html" title="class in openblocks.yacodeblocks"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../openblocks/yacodeblocks/BlockColor.html" title="class in openblocks.yacodeblocks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?openblocks/yacodeblocks/AutoSaver.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AutoSaver.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
